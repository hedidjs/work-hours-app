module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},13906,a=>{"use strict";function b(a,b){let[c,d]=a.split(":").map(Number),[e,f]=b.split(":").map(Number),g=60*c+d,h=60*e+f;h<g&&(h+=1440);let i=(h-g)/60,j=Math.min(i,12),k=Math.max(0,i-12);return{totalHours:Math.round(100*i)/100,regularHours:Math.round(100*j)/100,overtimeHours:Math.round(100*k)/100}}function c(a){return new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS"}).format(a)}function d(a){let b=new Date(a);return new Intl.DateTimeFormat("he-IL",{day:"2-digit",month:"2-digit",year:"numeric"}).format(b)}function e(a){let b=Math.floor(a),c=Math.round((a-b)*60);return`${b}:${c.toString().padStart(2,"0")}`}function f(a,c,d,e){if(0===a.length)return{totalBeforeVat:0,totalWithVat:0,bonusesTotal:0,regularHours:0,overtimeHours:0};let f=function(a,c){if(0===a.length)return{totalHours:0,regularHours:0,overtimeHours:0};let d=0;for(let c of a)d+=b(c.startTime,c.endTime).totalHours;let e=Math.min(d,12),f=Math.max(0,d-12);return{totalHours:Math.round(100*d)/100,regularHours:Math.round(100*e)/100,overtimeHours:Math.round(100*f)/100}}(a,0),g=0;if("separate"===c)for(let c of a)b(c.startTime,c.endTime).totalHours>0&&(g+=void 0!==c.customDailyRate?c.customDailyRate:e.dailyRate);else if(f.regularHours>0){let b=a[0]?.customDailyRate;g=void 0!==b?b:e.dailyRate}let h=f.overtimeHours*e.overtimeRate,i=d*e.kmRate,j=0;for(let b of a){let a=b.selectedBonuses||[];j+=(e.bonuses||[]).filter(b=>a.includes(b.id)).reduce((a,b)=>a+b.amount,0)}let k=g+h+i+j,l=k*(1+e.vatPercent/100);return{totalBeforeVat:Math.round(100*k)/100,totalWithVat:Math.round(100*l)/100,bonusesTotal:Math.round(100*j)/100,regularHours:f.regularHours,overtimeHours:f.overtimeHours}}a.s(["calculateMultiSegmentPayment",()=>f,"formatCurrency",()=>c,"formatDate",()=>d,"formatHours",()=>e])},77570,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(6555),g=a.i(8171),h=a.i(27669),i=a.i(13906);function j({workDays:a,employers:b}){let c=new Date().toISOString().slice(0,7),[d,e]=(0,h.useState)(c),[f,j]=(0,h.useState)(""),k=(0,h.useMemo)(()=>{let b=new Set;return a.forEach(a=>{b.add(a.date.slice(0,7))}),Array.from(b).sort().reverse()},[a]),l=(0,h.useMemo)(()=>a.filter(a=>(!d||!!a.date.startsWith(d))&&(!f||a.employerId===f)),[a,d,f]),m=(0,h.useMemo)(()=>{let a=l.reduce((a,b)=>a+b.regularHours+b.overtimeHours,0),b=l.reduce((a,b)=>a+b.regularHours,0),c=l.reduce((a,b)=>a+b.overtimeHours,0),d=l.reduce((a,b)=>a+b.kilometers,0),e=l.reduce((a,b)=>a+b.totalBeforeVat,0);return{totalHours:a,regularHours:b,overtimeHours:c,totalKm:d,totalBeforeVat:e,totalWithVat:l.reduce((a,b)=>a+b.totalWithVat,0),workDaysCount:l.length}},[l]),n=(0,h.useMemo)(()=>{let a={};return l.forEach(c=>{if(!a[c.employerId]){let d=b.find(a=>a.id===c.employerId);a[c.employerId]={name:d?.name||"לא ידוע",total:0,days:0}}a[c.employerId].total+=c.totalWithVat,a[c.employerId].days+=1}),Object.values(a).sort((a,b)=>b.total-a.total)},[l,b]);return(0,g.jsxs)("div",{className:"pb-4",children:[(0,g.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-4 md:mb-6",children:"סטטיסטיקות"}),(0,g.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4 transition-colors mb-4 md:mb-6",children:(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"חודש"}),(0,g.jsxs)("select",{value:d,onChange:a=>e(a.target.value),className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,g.jsx)("option",{value:"",children:"כל התקופה"}),k.map(a=>(0,g.jsx)("option",{value:a,children:(a=>{let[b,c]=a.split("-");return`${["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"][parseInt(c)-1]} ${b}`})(a)},a))]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"מעסיק"}),(0,g.jsxs)("select",{value:f,onChange:a=>j(a.target.value),className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,g.jsx)("option",{value:"",children:"כל המעסיקים"}),b.map(a=>(0,g.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]})}),0===l.length?(0,g.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-8 text-center text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400 dark:text-gray-500 transition-colors",children:"אין נתונים להצגה"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-4 md:mb-6",children:[(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4 transition-colors",children:[(0,g.jsx)("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500",children:"ימי עבודה"}),(0,g.jsx)("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:m.workDaysCount})]}),(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4 transition-colors",children:[(0,g.jsx)("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500",children:"שעות עבודה"}),(0,g.jsx)("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:(0,i.formatHours)(m.totalHours)}),(0,g.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500 hidden md:block",children:["רגילות: ",(0,i.formatHours)(m.regularHours)," | נוספות: ",(0,i.formatHours)(m.overtimeHours)]})]}),(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4 transition-colors",children:[(0,g.jsx)("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500",children:"קילומטרים"}),(0,g.jsx)("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:m.totalKm})]}),(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4 transition-colors",children:[(0,g.jsx)("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500",children:'סה"כ הכנסות'}),(0,g.jsx)("p",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:(0,i.formatCurrency)(m.totalWithVat)}),(0,g.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500 hidden md:block",children:['לפני מע"מ: ',(0,i.formatCurrency)(m.totalBeforeVat)]})]})]}),n.length>1&&(0,g.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4 transition-colors",children:[(0,g.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white dark:text-white mb-3 md:mb-4 text-sm md:text-base",children:"פירוט לפי מעסיק"}),(0,g.jsx)("div",{className:"space-y-2 md:space-y-3",children:n.map((a,b)=>(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),(0,g.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500",children:[a.days," ימים"]})]}),(0,g.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:(0,i.formatCurrency)(a.total)})]},b))})]})]})]})}a.s(["Statistics",()=>j],96497);var k=a.i(96497),l=a.i(9193);let m=(0,d.hoist)(k,"default"),n=(0,d.hoist)(k,"getStaticProps"),o=(0,d.hoist)(k,"getStaticPaths"),p=(0,d.hoist)(k,"getServerSideProps"),q=(0,d.hoist)(k,"config"),r=(0,d.hoist)(k,"reportWebVitals"),s=(0,d.hoist)(k,"unstable_getStaticProps"),t=(0,d.hoist)(k,"unstable_getStaticPaths"),u=(0,d.hoist)(k,"unstable_getStaticParams"),v=(0,d.hoist)(k,"unstable_getServerProps"),w=(0,d.hoist)(k,"unstable_getServerSideProps"),x=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/Statistics",pathname:"/Statistics",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:k}),y=(0,l.getHandler)({srcPage:"/Statistics",config:q,userland:k,routeModule:x,getStaticPaths:o,getStaticProps:n,getServerSideProps:p});a.s(["config",0,q,"default",0,m,"getServerSideProps",0,p,"getStaticPaths",0,o,"getStaticProps",0,n,"handler",0,y,"reportWebVitals",0,r,"routeModule",0,x,"unstable_getServerProps",0,v,"unstable_getServerSideProps",0,w,"unstable_getStaticParams",0,u,"unstable_getStaticPaths",0,t,"unstable_getStaticProps",0,s],77570)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1da2afde._.js.map
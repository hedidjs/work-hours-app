module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},13906,a=>{"use strict";function b(a,b){let[c,d]=a.split(":").map(Number),[e,f]=b.split(":").map(Number),g=60*c+d,h=60*e+f;h<g&&(h+=1440);let i=(h-g)/60,j=Math.min(i,12),k=Math.max(0,i-12);return{totalHours:Math.round(100*i)/100,regularHours:Math.round(100*j)/100,overtimeHours:Math.round(100*k)/100}}function c(a){return new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS"}).format(a)}function d(a){let b=new Date(a);return new Intl.DateTimeFormat("he-IL",{day:"2-digit",month:"2-digit",year:"numeric"}).format(b)}function e(a){let b=Math.floor(a),c=Math.round((a-b)*60);return`${b}:${c.toString().padStart(2,"0")}`}function f(a,c,d,e){if(0===a.length)return{totalBeforeVat:0,totalWithVat:0,bonusesTotal:0,regularHours:0,overtimeHours:0};let f=function(a,c){if(0===a.length)return{totalHours:0,regularHours:0,overtimeHours:0};let d=0;for(let c of a)d+=b(c.startTime,c.endTime).totalHours;let e=Math.min(d,12),f=Math.max(0,d-12);return{totalHours:Math.round(100*d)/100,regularHours:Math.round(100*e)/100,overtimeHours:Math.round(100*f)/100}}(a,0),g=0;if("separate"===c)for(let c of a)b(c.startTime,c.endTime).totalHours>0&&(g+=void 0!==c.customDailyRate?c.customDailyRate:e.dailyRate);else if(f.regularHours>0){let b=a[0]?.customDailyRate;g=void 0!==b?b:e.dailyRate}let h=f.overtimeHours*e.overtimeRate,i=d*e.kmRate,j=0;for(let b of a){let a=b.selectedBonuses||[];j+=(e.bonuses||[]).filter(b=>a.includes(b.id)).reduce((a,b)=>a+b.amount,0)}let k=g+h+i+j,l=k*(1+e.vatPercent/100);return{totalBeforeVat:Math.round(100*k)/100,totalWithVat:Math.round(100*l)/100,bonusesTotal:Math.round(100*j)/100,regularHours:f.regularHours,overtimeHours:f.overtimeHours}}a.s(["calculateMultiSegmentPayment",()=>f,"formatCurrency",()=>c,"formatDate",()=>d,"formatHours",()=>e])},2707,a=>a.a(async(b,c)=>{try{let b=await a.y("uuid-f504971595fbf72b");a.n(b),c()}catch(a){c(a)}},!0),47899,(a,b,c)=>{b.exports=a.x("react-router-dom-2c8e5fc0cdea126d",()=>require("react-router-dom-2c8e5fc0cdea126d"))},749,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(47899),g=a.i(2707),h=a.i(13906),i=b([g]);function j({employers:a,workDays:b,onSave:c}){let i=(0,f.useNavigate)(),{id:j}=(0,f.useParams)(),k=!!j,l=(0,e.useMemo)(()=>j?b.find(a=>a.id===j):null,[j,b]),[m,n]=(0,e.useState)({employerId:"",date:new Date().toISOString().split("T")[0],kilometers:0,calculationMode:"combined"}),[o,p]=(0,e.useState)([{id:(0,g.v4)(),location:"",startTime:"08:00",endTime:"17:00",customDailyRate:void 0,useCustomDailyRate:!1,selectedBonuses:[]}]);(0,e.useEffect)(()=>{l&&(n({employerId:l.employerId,date:l.date,kilometers:l.kilometers,calculationMode:l.calculationMode||"combined"}),l.segments&&l.segments.length>0?p(l.segments.map(a=>({id:a.id,location:a.location,startTime:a.startTime,endTime:a.endTime,customDailyRate:a.customDailyRate,useCustomDailyRate:void 0!==a.customDailyRate,selectedBonuses:a.selectedBonuses||[]}))):p([{id:(0,g.v4)(),location:l.location,startTime:l.startTime,endTime:l.endTime,customDailyRate:l.customDailyRate,useCustomDailyRate:void 0!==l.customDailyRate,selectedBonuses:l.selectedBonuses||[]}]))},[l]);let q=(0,e.useMemo)(()=>a.find(a=>a.id===m.employerId),[a,m.employerId]),r=(0,e.useMemo)(()=>{if(!q||0===o.length)return null;let a=o.map(a=>({startTime:a.startTime,endTime:a.endTime,customDailyRate:a.useCustomDailyRate?a.customDailyRate:void 0,selectedBonuses:a.selectedBonuses}));return(0,h.calculateMultiSegmentPayment)(a,m.calculationMode,m.kilometers,q)},[m,o,q]),s=(a,b)=>{p(o.map(c=>c.id===a?{...c,...b}:c))};return 0===a.length?(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-8 text-center transition-colors",children:[(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"יש להוסיף מעסיק לפני הוספת יום עבודה"}),(0,d.jsx)("button",{onClick:()=>i("/employers"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"הוספת מעסיק"})]}):(0,d.jsxs)("div",{className:"pb-4",children:[(0,d.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-4 md:mb-6",children:k?"עריכת יום עבודה":"הוספת יום עבודה"}),(0,d.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),!q||!r)return void alert("נא לבחור מעסיק");let b=o.map(a=>({id:a.id,location:a.location,startTime:a.startTime,endTime:a.endTime,customDailyRate:a.useCustomDailyRate?a.customDailyRate:void 0,selectedBonuses:a.selectedBonuses})),d=o.flatMap(a=>a.selectedBonuses),e={id:j||(0,g.v4)(),employerId:m.employerId,date:m.date,location:o[0]?.location||"",startTime:o[0]?.startTime||"08:00",endTime:o[o.length-1]?.endTime||"17:00",kilometers:m.kilometers,selectedBonuses:d,customDailyRate:o[0]?.useCustomDailyRate?o[0]?.customDailyRate:void 0,segments:b,calculationMode:m.calculationMode,regularHours:r.regularHours,overtimeHours:r.overtimeHours,totalBeforeVat:r.totalBeforeVat,totalWithVat:r.totalWithVat};c(e),i("/")},className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-4 md:mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["מעסיק ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("select",{value:m.employerId,onChange:a=>{n({...m,employerId:a.target.value}),p(o.map(a=>({...a,selectedBonuses:[]})))},required:!0,className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,d.jsx)("option",{value:"",children:"בחר מעסיק"}),a.map(a=>(0,d.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["תאריך ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"date",value:m.date,onChange:a=>n({...m,date:a.target.value}),required:!0,className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"קילומטרים"}),(0,d.jsx)("input",{type:"number",min:"0",step:"1",value:m.kilometers,onChange:a=>n({...m,kilometers:Number(a.target.value)}),className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.length>1&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"אופן חישוב שעות"}),(0,d.jsxs)("select",{value:m.calculationMode,onChange:a=>n({...m,calculationMode:a.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,d.jsx)("option",{value:"combined",children:"ביחד (מהתחלה הראשונה עד הסוף האחרון)"}),(0,d.jsx)("option",{value:"separate",children:"בנפרד (כל נקודה עם יומית משלה)"})]})]})]}),(0,d.jsxs)("div",{className:"border-t pt-4 md:pt-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-3 md:mb-4",children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white text-sm md:text-base",children:"נקודות עבודה"}),(0,d.jsx)("button",{type:"button",onClick:()=>{let a=o[o.length-1];p([...o,{id:(0,g.v4)(),location:"",startTime:a?.endTime||"08:00",endTime:"23:00",customDailyRate:void 0,useCustomDailyRate:!1,selectedBonuses:[]}])},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"+ הוספת נקודה"})]}),(0,d.jsx)("div",{className:"space-y-3 md:space-y-4",children:o.map((a,b)=>(0,d.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 md:p-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-2 md:mb-3",children:[(0,d.jsxs)("h4",{className:"font-medium text-gray-700 dark:text-gray-300 text-sm md:text-base",children:["נקודה ",b+1]}),o.length>1&&(0,d.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void(o.length>1&&p(o.filter(a=>a.id!==b)))},className:"text-red-500 hover:text-red-700 text-sm",children:"הסרה"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"מיקום"}),(0,d.jsx)("input",{type:"text",value:a.location,onChange:b=>s(a.id,{location:b.target.value}),placeholder:"הכנס מיקום",className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["שעת התחלה ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"time",value:a.startTime,onChange:b=>s(a.id,{startTime:b.target.value}),required:!0,className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["שעת סיום ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"time",value:a.endTime,onChange:b=>s(a.id,{endTime:b.target.value}),required:!0,className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),q&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:a.useCustomDailyRate,onChange:b=>s(a.id,{useCustomDailyRate:b.target.checked,customDailyRate:b.target.checked?a.customDailyRate||q.dailyRate:void 0}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),"יומית מותאמת"]}),a.useCustomDailyRate?(0,d.jsx)("input",{type:"number",min:"0",step:"1",value:a.customDailyRate??q.dailyRate,onChange:b=>s(a.id,{customDailyRate:Number(b.target.value)}),className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 py-2",children:(0,h.formatCurrency)(q.dailyRate)})]})]}),q&&q.bonuses&&q.bonuses.length>0&&(0,d.jsxs)("div",{className:"col-span-2 lg:col-span-4 mt-2 md:mt-4 pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,d.jsx)("h5",{className:"text-xs md:text-sm font-medium text-gray-700 mb-2",children:"תוספות לנקודה זו:"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2 md:gap-3",children:q.bonuses.map(b=>(0,d.jsxs)("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer bg-white px-2 md:px-3 py-1.5 rounded-lg border border-gray-200 hover:border-blue-300",children:[(0,d.jsx)("input",{type:"checkbox",checked:a.selectedBonuses.includes(b.id),onChange:()=>{var c,d;return c=a.id,d=b.id,void p(o.map(a=>a.id!==c?a:{...a,selectedBonuses:a.selectedBonuses.includes(d)?a.selectedBonuses.filter(a=>a!==d):[...a.selectedBonuses,d]}))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,d.jsx)("span",{className:"text-xs md:text-sm text-gray-700",children:b.name}),(0,d.jsx)("span",{className:"text-xs md:text-sm text-green-600 dark:text-green-400 font-medium",children:(0,h.formatCurrency)(b.amount)})]},b.id))})]})]},a.id))})]}),r&&(0,d.jsxs)("div",{className:"mt-4 md:mt-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-3 md:p-4",children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900 mb-2 md:mb-3 text-sm md:text-base",children:"סיכום"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 text-xs md:text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"שעות רגילות:"}),(0,d.jsxs)("p",{className:"font-medium",children:[r.regularHours," שעות"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"שעות נוספות:"}),(0,d.jsxs)("p",{className:"font-medium",children:[r.overtimeHours," שעות"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:'לפני מע"מ:'}),(0,d.jsx)("p",{className:"font-medium",children:(0,h.formatCurrency)(r.totalBeforeVat)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:'כולל מע"מ:'}),(0,d.jsx)("p",{className:"font-medium text-green-600 dark:text-green-400",children:(0,h.formatCurrency)(r.totalWithVat)})]})]}),r.bonusesTotal>0&&(0,d.jsxs)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:["כולל תוספות: ",(0,h.formatCurrency)(r.bonusesTotal)]}),o.length>1&&(0,d.jsx)("p",{className:"mt-2 text-sm text-blue-600",children:"combined"===m.calculationMode?`חישוב ביחד: ${o.length} נקודות, יומית אחת`:`חישוב בנפרד: ${o.length} יומיות`})]}),(0,d.jsxs)("div",{className:"mt-4 md:mt-6 flex flex-col md:flex-row gap-3 md:gap-4",children:[(0,d.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 md:py-2 rounded-lg font-medium transition-colors text-base",children:k?"עדכון":"שמירה"}),(0,d.jsx)("button",{type:"button",onClick:()=>i("/"),className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-6 py-3 md:py-2 rounded-lg font-medium transition-colors text-base",children:"ביטול"})]})]})]})}[g]=i.then?(await i)():i,a.s(["AddWorkDay",()=>j]),c()}catch(a){c(a)}},!1),91760,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(6555),i=a.i(749),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/AddWorkDay",pathname:"/AddWorkDay",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/AddWorkDay",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__c7b6ca28._.js.map